<%= stylesheet_link_tag "items" %>

<h1>Edit Listing</h1>

<%= form_for @item, html: {multipart: true}  do |f| %>
	<% if @item.errors.any? %>
		<div id="error_explaination">
			<h2><%= pluralize(@item.errors.count, "error") %> please correct the following before submitting</h2>
			<ul>
				<% @item.errors.full_messages.each do |msg| %>
				<li><%= msg %> </li>
				<% end %>
			</ul>
		</div>
	<% end %>

<div class="item-container">
	<div class="form-content">
		<div class="new-item-form">
			<% if @item.listing_type == 'timeoffer' %>
				<p> First, add some tags to better describe your service, so it shows up quicker when searched:</p>
			<% else %>
				<p> First, add some tags to your listing, so it shows up quicker when searched:</p>
			<% end %>
	          <div class="tag-input-box">
	            <input type="text" name="tag_box_1" id="tag-box-1" class="tag-box" placeholder="type here, ex. xbox">
	            <input type="text" name="tag_box_2" id="tag-box-2" class="tag-box">
	            <input type="text" name="tag_box_3" id="tag-box-3" class="tag-box">
	            <input type="text" name="tag_box_4" id="tag-box-4" class="tag-box">
	          </div>
	        	<input type="button" value="Add More" id="add-tag-button"/>
	        <div id="tag-instruction">* Maximum of 6 tags, empty boxes will not be added.</div>
		</div>

		<div class="new-item-form">
			<p> Add a Location:</p>
			<p class="form-title">Postal Code</p>
			<%= f.text_field :postal_code, :maxlength=> "6", :placeholder => "ex. M5V3A6, This way people nearby are more likely to discover your listing" %>
		</div>

		<% if @item.listing_type == 'rent'%>
			<%= f.hidden_field :listing_type, :value =>"rent" %>
		<% elsif @item.listing_type == 'sell' %>
			<%= f.hidden_field :listing_type, :value =>"sell" %>
		<% elsif @item.listing_type == 'lease' %>
			<%= f.hidden_field :listing_type, :value =>"lease" %>
		<% else %>
			<%= f.hidden_field :listing_type, :value =>"timeoffer" %>
		<% end %>

		<div class="new-item-form">
			<p> Description:</p>
			<p class="form-title">Listing Title</p>
			<%= f.text_field :title, :maxlength=> "100", :placeholder => "Give your listing a concise and catchy headline!"  %>
		</div>

		<div class="new-item-form">
			<%= f.label :summary %>
			<%= f.text_area :description, :maxlength=> "500", :placeholder => "Tell people about the qualities and highlights of your listing. You can include as many details as you'd like." %>
			<div class="countdown"></div>
		</div>

		<div class="new-item-form">
			<%#= f.file_field :photo %>
      <%= file_field_tag "images[]", type: :file, multiple: true %>
			<div class="upload-photo">
				<%= image_tag "phone.png", id:"photo-image" %>
				<p id="pic-title">  + Add Photo </p>
				<p id="descriptor"> You can upload more than one file at a time </p>
			</div>
		</div>

		<% if @item.listing_type == 'timeoffer' %>
			<%= f.fields_for :prices, @price do |p| %>
			    <%= p.hidden_field :timeframe, :value => "Hour" %>
			    <div class="new-item-form">
			    	<p> Your Price:</p>
						<div class="rent-deposit-money-sign"> $ </div>
			        <%=p.number_field :amount %> <span class="perhr">per Hour</span>
			    </div>
			    <%= f.hidden_field :deposit, :value => 0 %>
			<% end %>
		<% elsif @item.listing_type == 'sell'%>
			<%= f.fields_for :prices, @price do |p| %>
				<div class="new-item-form">
			    	<p> Sale Price:</p>
						<div id="actual-price-money-sign"> $ </div>
			        <%=p.number_field :amount %>
			    </div>
			    <%= f.hidden_field :deposit, :value => 0 %>
			<% end %>
		<% else %>
			<%= f.fields_for :prices, @price do |p| %>
			    <div class="new-item-form">
			        <%=	p.label :timeframe %>
			        <%= p.select(:timeframe, [["Hour"],["Day"],["Week"], ["Month"]], :prompt => 'Select') %>
			    </div>

			    <div class="new-item-form">
			    	<p> Rental Price:</p>
						<div id="actual-price-money-sign"> $ </div>
			        <%=p.number_field :amount %>
			    </div>

				<div class="new-item-form">
          <% if @item.listing_type == 'lease' %>

					<p id="deposit-title"> Deposit Price & Sale Price:</p>
					<div class="rent-deposit-money-sign"> $ </div>
					<%= f.text_field :deposit %>
          <div class="deposit-tip"> This ensures that the item is treated with care, and is returned on time. </br>This amount will be charged only if the other party fails to return the item, damage it, or lose it.</br>
          </br>After the rental period, your customer may request to buy this item.
        </br>The Deposit Price will double as the Sale Price. </br> Their rental fees will be
            credited towards the purchase.
            </div>
          <% else %>
          <p id="deposit-title"> Deposit Price</p>
          <div class="rent-deposit-money-sign"> $ </div>
          <%= f.text_field :deposit %>
          <div class="deposit-tip"> This ensures that the item is treated with care, and is returned on time. </br>This amount will be charged only if the other party fails to return the item, damage it, or lose it.</div>
          <% end %>
	       </div>
			<% end %>
		<% end %>

		<%= f.submit 'Submit', :class => 'submit-listing' %>
		<div id="small-tip"> you can edit/update your listing at anytime after you submit.</div>


<%end%>
	</div>
</div>
