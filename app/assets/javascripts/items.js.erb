// Make sure the add answer button is showing
$("#add-tag-button").css("display", "inline-block");

var tagBoxCounter = 4;
var MAX_BOX_COUNT = 6;

$("#add-tag-button").click(function() {
  // add another tag text box when clicked under existing text box.
  var newBoxNumber = tagBoxCounter + 1;

  if (newBoxNumber <= MAX_BOX_COUNT) {
    var newHtml = '<input type="text" name="tag_box_' + newBoxNumber +'" id="tag-box-' + newBoxNumber +'" class="tag-box" >';

    $(".tag-input-box").append(newHtml);
    tagBoxCounter++;
  } else {
    $("#add-tag-button").css("display", "none");
  }
});

$('#new_review').on('ajax:beforeSend', function(){
   $('input[type=submit]').val('Saving....').attr('disabled','disabled');
});

$('#new_review').on('ajax:complete', function(){
   $('input[type=submit]').val('Create Review').removeAttr('disabled');
});

function updateCountdown() {
  // 140 is the max message length
  var remaining = 350 - jQuery('#item_description').val().length;
  $('.countdown').text(remaining + ' characters remaining.');
}

function validate_user_form_and_submit(){

  var validate = /^[A-Za-z]\d[A-Za-z]\s?\d[A-Za-z]\d$/.test($('#item_postal_code').val());

  if ( /^[A-Za-z]\d[A-Za-z]\s?\d[A-Za-z]\d$/.test($('#item_postal_code').val()) ) {
    return true;
  } else {
    event.preventDefault();
  }
}

$(function(){ // this will be called when the DOM is ready
  $('#item_description').keyup(function(){
    console.log("bbl");
    $('.countdown').text( '1 characters remaining.');
    updateCountdown();
  });

  $('#item_description').change(function(){
    updateCountdown();
  });
});
